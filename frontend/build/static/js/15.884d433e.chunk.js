(this["webpackJsonplomads-ui"]=this["webpackJsonplomads-ui"]||[]).push([[15],{1435:function(t,e,n){"use strict";n.r(e),n.d(e,"TorusWalletAdapter",(function(){return v}));var r=n(14),a=n(6),i=n(7),s=n(10),o=n(26),c=n(23),u=n(11),h=n(12),l=n(0),p=n.n(l),d=n(8),f=n.n(d),O=n(611),b=n(9);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){f()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(a.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=e.call(this),f()(Object(s.a)(t),"name",b.i.TORUS_EVM),f()(Object(s.a)(t),"adapterNamespace",b.c.EIP155),f()(Object(s.a)(t),"currentChainNamespace",b.f.EIP155),f()(Object(s.a)(t),"type",b.a.EXTERNAL),f()(Object(s.a)(t),"status",b.d.NOT_READY),f()(Object(s.a)(t),"torusInstance",null),f()(Object(s.a)(t),"torusWalletOptions",void 0),f()(Object(s.a)(t),"initParams",void 0),f()(Object(s.a)(t),"loginSettings",{}),f()(Object(s.a)(t),"rehydrated",!1),t.torusWalletOptions=r.adapterSettings||{},t.initParams=r.initParams||{},t.loginSettings=r.loginSettings||{},t.chainConfig=r.chainConfig||null,t}return Object(i.a)(n,[{key:"provider",get:function(){return this.status===b.d.CONNECTED&&this.torusInstance?this.torusInstance.provider:null},set:function(t){throw new Error("Not implemented")}},{key:"init",value:function(){var t=Object(r.a)(p.a.mark((function t(e){var r,a,i,s,u,h,l,d,f;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(o.a)(Object(c.a)(n.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig?(u=this.chainConfig,h=u.chainId,l=u.blockExplorer,d=u.displayName,f=u.rpcTarget,r={chainId:parseInt(h,16),host:f,blockExplorer:l,networkName:d}):(this.chainConfig=Object(b.m)(b.f.EIP155,1),a=this.chainConfig,i=a.blockExplorer,s=a.displayName,r={chainId:1,host:"mainnet",blockExplorer:i,networkName:s}),this.torusInstance=new O.a(this.torusWalletOptions),t.next=5,this.torusInstance.init(w(w({showTorusButton:!1},this.initParams),{},{network:r}));case 5:if(this.status=b.d.READY,this.emit(b.b.READY,b.i.TORUS_EVM),t.prev=7,!e.autoConnect){t.next=12;break}return this.rehydrated=!0,t.next=12,this.connect();case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(7),b.o.error("Failed to connect with torus evm provider",t.t0),this.emit(b.b.ERRORED,t.t0);case 18:case"end":return t.stop()}}),t,this,[[7,14]])})));return function(e){return t.apply(this,arguments)}}()},{key:"connect",value:function(){var t=Object(r.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(o.a)(Object(c.a)(n.prototype),"checkConnectionRequirements",this).call(this),this.torusInstance){t.next=3;break}throw b.j.notReady("Torus wallet is not initialized");case 3:return this.status=b.d.CONNECTING,this.emit(b.b.CONNECTING,{adapter:b.i.TORUS_EVM}),t.prev=5,t.next=8,this.torusInstance.login(this.loginSettings);case 8:if(!(e=this.torusInstance.provider.chainId)||parseInt(e)===parseInt(this.chainConfig.chainId,16)){t.next=11;break}throw b.j.fromCode(5e3,"Not connected to correct chainId. Expected: ".concat(this.chainConfig.chainId,", Current: ").concat(e));case 11:return this.status=b.d.CONNECTED,this.torusInstance.showTorusButton(),this.emit(b.d.CONNECTED,{adapter:b.i.TORUS_EVM,reconnected:this.rehydrated}),t.abrupt("return",this.provider);case 17:throw t.prev=17,t.t0=t.catch(5),this.status=b.d.READY,this.rehydrated=!1,this.emit(b.d.ERRORED,t.t0),t.t0 instanceof b.l?t.t0:b.k.connectionError("Failed to login with torus wallet");case 23:case"end":return t.stop()}}),t,this,[[5,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"disconnect",value:function(){var t=Object(r.a)(p.a.mark((function t(){var e,n=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:{cleanup:!1},this.status===b.d.CONNECTED){t.next=3;break}throw b.k.notConnectedError("Not connected with wallet");case 3:if(this.torusInstance){t.next=5;break}throw b.j.notReady("Torus wallet is not initialized");case 5:return t.next=7,this.torusInstance.logout();case 7:this.torusInstance.hideTorusButton(),e.cleanup?(this.status=b.d.NOT_READY,this.torusInstance=null):this.status=b.d.READY,this.rehydrated=!1,this.emit(b.b.DISCONNECTED);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var t=Object(r.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.status===b.d.CONNECTED){t.next=2;break}throw b.k.notConnectedError("Not connected with wallet");case 2:if(this.torusInstance){t.next=4;break}throw b.j.notReady("Torus wallet is not initialized");case 4:return t.next=6,this.torusInstance.getUserInfo("");case 6:return e=t.sent,t.abrupt("return",e);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setAdapterSettings",value:function(t){}}]),n}(b.e)}}]);
//# sourceMappingURL=15.884d433e.chunk.js.map